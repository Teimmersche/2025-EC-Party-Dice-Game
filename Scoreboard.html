async function fetchScoreboard() {
  const apiUrl = '你的Apps Script部署網址';
  const scoreboardElement = document.getElementById('scoreboard');
  
  try {
    console.log('開始fetch資料...');
    scoreboardElement.innerHTML = '正在載入資料...';
    
    const response = await fetch(apiUrl);
    console.log('回應狀態:', response.status);
    
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    
    const data = await response.json();
    console.log('收到的資料:', data);
    
    if (!Array.isArray(data) || data.length === 0) {
      scoreboardElement.innerHTML = '沒有資料可顯示';
      return;
    }
    
    // 排序資料（假設有 score 欄位）
    data.sort((a, b) => b.score - a.score);
    
    // 更新 HTML
    scoreboardElement.innerHTML = `
      <table>
        <thead>
          <tr>
            <th>排名</th>
            <th>玩家</th>
            <th>分數</th>
          </tr>
        </thead>
        <tbody>
          ${data.map((item, index) => `
            <tr>
              <td>${index + 1}</td>
              <td>${item.player || '未知玩家'}</td>
              <td>${item.score || 0}</td>
            </tr>
          `).join('')}
        </tbody>
      </table>
    `;
  } catch (error) {
    console.error('抓取資料時發生錯誤:', error);
    scoreboardElement.innerHTML = `載入失敗: ${error.message}`;
  }
}

// 初次載入
fetchScoreboard();

// 每 30 秒更新一次記分板
setInterval(fetchScoreboard, 30000);
